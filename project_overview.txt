Project: Keystroke Dynamics Behavioral Biometrics

This project implements a system for continuous user authentication based on typing patterns (keystroke dynamics). It uses a deep learning model (LSTM) to learn a user's unique typing rhythm and can verify their identity in real-time.

The system is divided into a backend API, a machine learning model, feature extraction logic, and various scripts for training and testing.

---

### Core Directories & Files

**`backend/`**
This directory contains all the server-side logic, including the main API, the training data collection API, and feature extraction modules.

*   **`backend/api.py`**
    *   **Purpose**: This is the **main production API server**. It's built with FastAPI and serves the primary endpoints for user authentication.
    *   **Functionality**:
        *   Handles user enrollment (`/api/auth/enroll`), where it creates a biometric template for a user.
        *   Performs one-time user verification (`/api/auth/verify`).
        *   Identifies a user from a pool of enrolled users (`/api/auth/identify`).
        *   Provides continuous monitoring via HTTP (`/api/auth/monitor`) and a WebSocket (`/ws/monitor/...`) to track a user's risk score during a session.
        *   It loads a pre-trained model and user templates from the `/models` and `/data` directories on startup.

*   **`backend/api_training.py`**
    *   **Purpose**: A **specialized API server used only for collecting training data**.
    *   **Functionality**:
        *   It exposes the same `/api/auth/enroll` endpoint as the main API.
        *   However, instead of creating a user template directly, it saves the raw keystroke sequences and the associated `userId` into a JSON file: `data/training_sequences.json`.
        *   This script is run to gather high-quality, labeled data from multiple users before training a new model.

*   **`backend/train_model.py`**
    *   **Purpose**: This is the **model training script**. It uses the data collected by `api_training.py` to train the biometric model.
    *   **Functionality**:
        *   Loads `data/training_sequences.json`.
        *   Defines a **Siamese LSTM network**, which is designed to learn a similarity function between typing samples.
        *   Uses a **Contrastive Loss** function to train the network to produce similar embeddings for sequences from the same user and different embeddings for sequences from different users.
        *   Saves the trained model weights to `models/keystroke_biometric_model.pth`.

*   **`backend/feature_extraction.py`**
    *   **Purpose**: This module is responsible for converting raw keystroke event data (timestamps, keys, etc.) into numerical features suitable for the machine learning model.
    *   **Functionality**:
        *   Contains the `KeystrokeFeatureExtractor` class.
        *   The key method is `create_sequence()`, which takes a list of keystroke events and produces a fixed-length sequence (a NumPy array of shape `(sequence_length, 3)`).
        *   The three features for each keystroke are `dwellTime`, `flightTime`, and a numerical `key_category`. This sequence is the direct input to the LSTM model.

*   **`backend/test_system.py`**
    *   **Purpose**: An integration test suite for the authentication system.
    *   **Functionality**:
        *   Generates synthetic (fake) user typing data with distinct patterns for different users.
        *   Tests the full pipeline: enrolling users, verifying a legitimate user, and detecting an imposter.
        *   Provides a way to quickly check if the core logic is working as expected without needing a frontend or real data.

**`models/`**
This directory contains the Python code defining the machine learning model architecture and the logic for using it.

*   **`models/keystroke_auth_model.py`**
    *   **Purpose**: Defines the core authentication classes and the neural network architecture.
    *   **Functionality**:
        *   `KeystrokeLSTM`: Defines the structure of the LSTM neural network using PyTorch. **Note**: The `train_model.py` script uses a more advanced `SiameseLSTM` architecture, while this file defines a simpler, single-branch LSTM. The `KeystrokeAuthenticator` uses this simpler model.
        *   `KeystrokeAuthenticator`: A high-level class that orchestrates the entire authentication process. It uses the `KeystrokeLSTM` model to:
            *   `enroll_user()`: Create a biometric "template" (an average embedding) for a user.
            *   `verify_user()`: Compare a new typing sample to a user's template and calculate a similarity score.
            *   `identify_user()`: Compare a sample against all known user templates to find the best match.

**`data/`**
This directory is for storing data used by the system.

*   **`data/training_sequences.json`** (Generated by `api_training.py`)
    *   **Purpose**: Stores the raw, labeled keystroke sequences collected from multiple users for training. This is the input for `train_model.py`.

*   **`data/datafind.txt`**
    *   **Purpose**: A research file containing notes on public datasets (like Blackbox, KeyRecs) that could be used for training or benchmarking keystroke dynamics models.

**`root/`**

*   **`techstack.txt`**
    *   **Purpose**: A summary of the technologies used in the project (React, Python, FastAPI, PyTorch, etc.) and a justification for each choice.